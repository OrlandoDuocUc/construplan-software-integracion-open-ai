<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: DejaVu Sans, Helvetica, Arial, sans-serif; font-size: 12px; }
    h1, h2, h3 { color: #1d3557; }
    .header { text-align: center; margin-bottom: 20px; }
    .section { margin-bottom: 18px; }
    .section-title { font-size: 16px; margin-bottom: 6px; border-bottom: 1px solid #ccc; }
    .info-table { width: 100%; border-collapse: collapse; }
    .info-table td { padding: 6px; border: 1px solid #ddd; }
    .image-block { text-align: center; margin: 12px 0; }
    .image-block img { max-width: 100%; height: auto; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Informe Construplan</h1>
    <p>Folio: {{ model.pk }} | Fecha: {{ result.created_at|date:"d/m/Y H:i" }}</p>
  </div>
  <div class="section">
    <h2 class="section-title">Datos del usuario</h2>
    <table class="info-table">
      <tr><td>Nombre</td><td>{{ model.user.full_name }}</td></tr>
      <tr><td>RUT</td><td>{{ model.user.rut }}</td></tr>
      <tr><td>Email</td><td>{{ model.user.email }}</td></tr>
    </table>
  </div>
  <div class="section">
    <h2 class="section-title">Modelo</h2>
    <table class="info-table">
      <tr><td>Nombre</td><td>{{ model.name }}</td></tr>
      <tr><td>Descripción</td><td>{{ model.description }}</td></tr>
    </table>
  </div>
  {% if image_path %}
  <div class="section">
    <h2 class="section-title">Imagen generada</h2>
    <div class="image-block">
      <img src="{{ image_path }}" alt="Resultado IA">
    </div>
  </div>
  {% endif %}
  <div class="section">
    <h2 class="section-title">Resultado IA</h2>
    <table class="info-table">
      <tr><td>m² estimados</td><td>{{ result.square_meters }}</td></tr>
      <tr><td>Materiales</td><td>{{ result.materials }}</td></tr>
      <tr><td>Plazos</td><td>{{ result.timeline }}</td></tr>
      <tr><td>Recomendaciones</td><td>{{ result.recommendations }}</td></tr>
    </table>
  </div>
  <div class="section">
    <p>Documento generado automáticamente por Construplan.</p>
  </div>
</body>
</html>
